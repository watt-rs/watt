/*
 Ð‘Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° io.
 | Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ println, print Ð¸ input
 | Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð²
 | > crate::vm::natives::libs::natives_io
 */
unit io {
    /*
     Ð’Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ.
     ÐŸÐ¾ÑÐ»Ðµ, Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ \n.
    */
    native println -> 'io@println'

    /*
     Ð’Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ
    */
    native print -> 'io@print'

    /*
     Ð—Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ð²Ð²Ð¾Ð´ Ñƒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
    */
    native input -> 'io@input'
}

/*
 Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ ÑÐ¿Ð¸ÑÐºÐ°.
 | Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ add, set, get, index_of,
 | length, delete, to_string
 | Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð²
 | > crate::vm::natives::libs::natives_list
*/
unit __list_utils {
    native make -> 'list@make'
    native add -> 'list@add'
    native set -> 'list@set'
    native get -> 'list@get'
    native index_of -> 'list@index_of'
    native length -> 'list@length'
    native delete -> 'list@delete'
    native to_string -> 'list@to_string'
}

/*
 Ð¡Ð¿Ð¸ÑÐ¾Ðº.
 | Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ add, set, get, index_of,
 | length, delete, to_string
 | Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð²
 | > list_utils
*/
type List {
    fun init {
        self.internal := __list_utils.make()
    }
    fun add(value) {
        __list_utils.add(self.internal, value)
    }
    fun set(index, value) {
        __list_utils.set(self.internal, index, value)
    }
    fun delete(value) {
        __list_utils.delete(self.internal, value)
    }
    fun length {
        return __list_utils.length(self.internal)
    }
    fun to_string {
        return __list_utils.to_string(self.internal)
    }
    fun get(index) {
        return __list_utils.get(self.internal, index)
    }
}

/*
list := new List()
list.add(1)
list.add(3)
list.add(6)
io.println(list.get(1))
*/
// a tractor ðŸšœ
type Tractor(storage) {
    // amount of ðŸŒ¾
    value := 0
    // fill ðŸŒ¿
    fun fill(value) {
        if self.value + value > storage {
            self.value = storage
            return null
        }
        self.value += value
    }
    // print ðŸ“œ
    fun print() {
        io.print('tractor value: ')
        io.println(self.value)
    }
}

tractor := new Tractor(100)
tractor.fill(50)
tractor.print()
tractor.fill(70)
tractor.print()